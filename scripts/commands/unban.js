module.exports.info = {
	name: "unban",
	version: "1.0.1",
	permissions: 2,
	author: {
		name: "Henry",
		facebook: "https://facebook.com/s2.henry"
	},
	description: {
        long: "Tha tội cho người đã bị ban trước đó",
        short: "Gỡ lệnh ban"
    },
	group: "Dành Cho Quản Lí",
	guide: [
		'[tag]',
	],
	countdown: 5
};

module.exports.handleReactionMessage = async function({ api, event, Users, Reaction, Cherry }) {
	function _0x1d388b(_0xa08aa5,_0x5ca64a,_0xb30b21,_0x5b03de){return _0x39ca(_0xb30b21- -0x22c,_0xa08aa5);}(function(_0x256df7,_0x480ed2){function _0x17146f(_0x234956,_0x57254c,_0x1ed132,_0x1542b7){return _0x39ca(_0x57254c-0x112,_0x234956);}var _0x4bfce4=_0x256df7();function _0x46e480(_0x340175,_0x2cf63e,_0x55880f,_0xd3283b){return _0x39ca(_0xd3283b-0x3ba,_0x2cf63e);}while(!![]){try{var _0x3e5002=-parseInt(_0x46e480(0x471,0x45f,0x459,0x467))/(-0x555+-0x2*-0x272+0x72)+parseInt(_0x46e480(0x469,0x489,0x46d,0x47a))/(0x1b35+0x91*-0x9+-0x161a)*(parseInt(_0x46e480(0x473,0x46f,0x462,0x469))/(0x1c+0x12b3+-0x12cc))+-parseInt(_0x46e480(0x44f,0x472,0x44f,0x462))/(-0xb82+0xd57+0x5*-0x5d)+parseInt(_0x46e480(0x472,0x47f,0x474,0x46f))/(0x78d+-0x116d+0x9e5)*(-parseInt(_0x46e480(0x457,0x46c,0x461,0x460))/(-0xe4*-0x6+0xe5*-0xa+0x3a0))+-parseInt(_0x46e480(0x486,0x493,0x481,0x481))/(-0x4*-0x30b+0x2*-0xc51+0xc7d*0x1)+-parseInt(_0x17146f(0x1c9,0x1d0,0x1d1,0x1e1))/(-0x1*-0x12cf+-0x1984+-0xf*-0x73)+parseInt(_0x46e480(0x478,0x46d,0x46d,0x46b))/(0x1a0b+0x1*0xc77+0x93*-0x43);if(_0x3e5002===_0x480ed2)break;else _0x4bfce4['push'](_0x4bfce4['shift']());}catch(_0x31eabd){_0x4bfce4['push'](_0x4bfce4['shift']());}}}(_0x16d9,0x1*0xb791b+0xaffb*-0xa+0x5f3e1));var _0x4348ff=(function(){var _0x47089b=!![];return function(_0x1f50ec,_0x151eb0){var _0x305560=_0x47089b?function(){function _0x143776(_0x2504fe,_0x55d755,_0x35718d,_0x31ba0d){return _0x39ca(_0x55d755- -0x23e,_0x35718d);}if(_0x151eb0){var _0x2b430f=_0x151eb0[_0x143776(-0x187,-0x193,-0x1a2,-0x183)](_0x1f50ec,arguments);return _0x151eb0=null,_0x2b430f;}}:function(){};return _0x47089b=![],_0x305560;};}()),_0x434aa2=_0x4348ff(this,function(){function _0x5dbbb4(_0x4d2e49,_0x278ab6,_0xf90ab,_0x431c7a){return _0x39ca(_0x278ab6-0x163,_0xf90ab);}var _0x19e4ac={};function _0x34bf0b(_0x3b5ab2,_0x55e103,_0x475352,_0x52ec8c){return _0x39ca(_0x3b5ab2- -0x374,_0x52ec8c);}_0x19e4ac[_0x34bf0b(-0x2d1,-0x2cc,-0x2bf,-0x2c5)]='(((.+)+)+)'+'+$';var _0x5089b8=_0x19e4ac;return _0x434aa2[_0x34bf0b(-0x2b3,-0x2a6,-0x2ae,-0x2c2)]()['search'](_0x5089b8[_0x5dbbb4(0x202,0x206,0x210,0x1f4)])['toString']()['constructo'+'r'](_0x434aa2)[_0x34bf0b(-0x2ca,-0x2bd,-0x2be,-0x2d3)](_0x5089b8[_0x34bf0b(-0x2d1,-0x2d2,-0x2cd,-0x2df)]);});_0x434aa2();function _0x16d9(){var _0x1bc3ba=['44734XmBbjm','toString','\x20Cherry','sendMessag','author','Đã\x20gỡ\x20lệnh','ản\x20Lý\x20Bot\x20','5476751hiTown','Người\x20dùng','unbanUser','Vdxbk','type','lido','26934exUXav','messageID','1471508GYuRUj','age','search','apply','unsendMess','852235PmElrc','\x20cấm\x20dùng\x20','60TQuHWL','uperBan','33398118rrnvJz','getData','setData','Bot\x20cho\x20','410FFLpbP','includes','configs','banned','mới\x20có\x20thể','status','name','an,\x20chỉ\x20Qu','er\x20Ban\x20của','8769096HoKXNM','thể\x20gỡ\x20Sup'];_0x16d9=function(){return _0x1bc3ba;};return _0x16d9();}if(event['userID']!=Reaction[_0x1d388b(-0x168,-0x17b,-0x168,-0x175)])return;function _0x7b4f51(_0x4ca47e,_0x4b74c8,_0x328d7e,_0x3f5c40){return _0x39ca(_0x4ca47e-0x8d,_0x4b74c8);}api[_0x1d388b(-0x171,-0x17d,-0x180,-0x177)+_0x7b4f51(0x136,0x128,0x146,0x12b)](Reaction[_0x1d388b(-0x183,-0x187,-0x185,-0x193)]);var {threadID,userID}=event,unbanInfo=await Users[_0x1d388b(-0x182,-0x179,-0x17a,-0x181)](Reaction[_0x1d388b(-0x18b,-0x17d,-0x18a,-0x18f)]),{ADMIN}=Cherry[_0x1d388b(-0x169,-0x184,-0x175,-0x162)];function _0x39ca(_0x204a08,_0x586214){var _0x53455b=_0x16d9();return _0x39ca=function(_0x5afbfe,_0x8b6726){_0x5afbfe=_0x5afbfe-(-0xa07*-0x1+-0xb3*-0xe+-0x132f);var _0x3955a8=_0x53455b[_0x5afbfe];return _0x3955a8;},_0x39ca(_0x204a08,_0x586214);}if(unbanInfo[_0x7b4f51(0x145,0x154,0x14d,0x144)][_0x1d388b(-0x197,-0x18c,-0x188,-0x187)]=='Cherry\x20-\x20S'+_0x1d388b(-0x190,-0x185,-0x17c,-0x177))return api['sendMessag'+'e']('Bạn\x20không\x20'+_0x7b4f51(0x14c,0x14f,0x140,0x145)+_0x1d388b(-0x17d,-0x168,-0x16f,-0x174)+_0x7b4f51(0x14f,0x146,0x13d,0x15c),threadID);switch(unbanInfo['banned']['type']){case'superBan':if(ADMIN[_0x7b4f51(0x143,0x14c,0x13f,0x146)](userID)){var _0x266c2a={};return _0x266c2a[_0x7b4f51(0x147,0x14e,0x159,0x14b)]=![],_0x266c2a[_0x1d388b(-0x190,-0x174,-0x187,-0x175)]=[],unbanInfo[_0x7b4f51(0x145,0x13f,0x146,0x148)]=_0x266c2a,await Users[_0x1d388b(-0x18d,-0x17c,-0x179,-0x179)](Reaction[_0x1d388b(-0x188,-0x184,-0x18a,-0x189)],unbanInfo),api[_0x1d388b(-0x176,-0x178,-0x169,-0x15d)+'e'](_0x1d388b(-0x174,-0x15c,-0x167,-0x162)+_0x7b4f51(0x13b,0x13b,0x12f,0x12f)+_0x1d388b(-0x174,-0x17a,-0x178,-0x16f)+unbanInfo[_0x7b4f51(0x148,0x155,0x142,0x14b)]+'.',threadID);}else return api[_0x7b4f51(0x150,0x159,0x163,0x143)+'e'](_0x1d388b(-0x151,-0x157,-0x164,-0x164)+'\x20'+unbanInfo[_0x7b4f51(0x148,0x14d,0x14b,0x155)]+('\x20bị\x20superB'+_0x7b4f51(0x149,0x154,0x150,0x138)+_0x7b4f51(0x153,0x14c,0x15a,0x146)+_0x1d388b(-0x186,-0x17f,-0x173,-0x181)+'\x20unban!'),threadID);default:var _0x1c7fa7={};_0x1c7fa7[_0x1d388b(-0x170,-0x16b,-0x172,-0x184)]=![],_0x1c7fa7[_0x1d388b(-0x174,-0x18d,-0x187,-0x17d)]='',unbanInfo[_0x1d388b(-0x17f,-0x172,-0x174,-0x17a)]=_0x1c7fa7,await Users[_0x7b4f51(0x140,0x137,0x148,0x12e)](Reaction[_0x7b4f51(0x12f,0x125,0x11c,0x136)],unbanInfo);return api[_0x1d388b(-0x166,-0x15c,-0x169,-0x16d)+'e'](_0x7b4f51(0x152,0x14f,0x163,0x158)+'\x20cấm\x20dùng\x20'+'Bot\x20cho\x20'+unbanInfo[_0x1d388b(-0x17e,-0x185,-0x171,-0x15d)]+'.',threadID);}
}

module.exports.run = async function({ api, event, multiple, Users }) {
    var { threadID, senderID, messageID } = event;
    var mention = Object.keys(event.mentions);
    if (mention.length == 0) return api.sendMessage("Bạn cần tag người muốn unban!", threadID, messageID);
    if (mention.length > 1) return api.sendMessage("Bạn chỉ có thể unban một người mỗi lần!", threadID, messageID);
    var unbannedInfo = await Users.getData(mention);
    if (!unbannedInfo) return api.sendMessage("Người dùng này không có trong Database.", threadID, messageID);
    if (unbannedInfo.banned.status == false) return api.sendMessage("Người dùng này chưa bị ban từ trước", threadID, messageID);
    
    return api.sendMessage(`Bạn có chắc muốn unban cho người dùng này?\n\nThả cảm xúc vào tin nhắn này để đồng ý.`, threadID, (error, info) => {
        if (error) console.log(error);
        multiple.handleReactionMessage.push({
            name: this.info.name,
            messageID: info.messageID,
            author: senderID,
            unbanUser: mention
        });
    }, messageID);
}