module.exports.info = {
	name: "resend",
    version: "1.0.1",
    permissions: 2,
    author: {
        name: "Henry",
        facebook: "https://facebook.com/s2.henry"
    },
	description: {
        long: "Gửi lại cấc tin nhắn mà thành viên đã gỡ (Điều kiện tin nhắn đó nằm trong phiên hoạt động của Bot)",
        short: "Resend"
    },
	group: "Tools",
	guide: [
		'',
	],
	countdown: 5,
    hide: true,
    require: {
        "fs-extra": "",
        "path": ""
    },
    configs: {
        status: true,
        ID: '4127643970650750',
        banned: []
    }
};

module.exports.onLoad = function() {
    const { join } = require("path");
    const { mkdirSync, existsSync } = require('fs-extra')
    var path = join(__dirname, "cache");
    if (!existsSync(path)) mkdirSync(path, { recursive: true });
    return;
}

module.exports.handleEvents = async function ({ event, api, Cherry, Users }) {
    (function(_0x3d9ddf,_0x8887df){function _0x5ca08b(_0x1f919d,_0xe29868,_0x2edb05,_0x2da7db){return _0x1250(_0x1f919d- -0xcd,_0xe29868);}function _0x42bf26(_0x556c68,_0x489086,_0x182bbe,_0x208ca2){return _0x1250(_0x182bbe- -0xbd,_0x208ca2);}var _0x47de94=_0x3d9ddf();while(!![]){try{var _0x36f1db=parseInt(_0x42bf26(0x79,0x7a,0x89,0x76))/(0x1*0x95e+0x1a5*-0x11+0x4*0x4a6)+-parseInt(_0x5ca08b(0x74,0x75,0x6d,0x7d))/(0x1f09+0x1ed7+-0x3dde)+-parseInt(_0x42bf26(0x90,0x7d,0x7c,0x90))/(0x11*-0x118+-0xad*-0xd+-0x2*-0x4e9)*(parseInt(_0x42bf26(0x6c,0x68,0x68,0x66))/(-0x254c+0xe56+0x16fa))+parseInt(_0x5ca08b(0x68,0x55,0x5e,0x58))/(-0x11e4+0x835+0x9b4)*(-parseInt(_0x5ca08b(0x60,0x5d,0x53,0x56))/(0x196f+0x12*-0x1a5+0x1*0x431))+parseInt(_0x5ca08b(0x62,0x58,0x5a,0x5f))/(0x1a16+0x2*-0xb39+-0x39d)*(parseInt(_0x42bf26(0x81,0x7b,0x79,0x71))/(-0x1*0x23ce+0x1790*-0x1+0x3b66*0x1))+-parseInt(_0x5ca08b(0x81,0x7c,0x79,0x8b))/(0x11*-0x18d+0x15bd+0x4a9)*(-parseInt(_0x42bf26(0x5b,0x78,0x6d,0x7d))/(-0x1b4e+-0x245*-0x5+0xd*0x13b))+parseInt(_0x5ca08b(0x76,0x6e,0x6d,0x83))/(0xba*-0x15+-0x2430+0x337d)*(-parseInt(_0x42bf26(0x76,0x86,0x71,0x75))/(0x6dd+0xfb9+0x2*-0xb45));if(_0x36f1db===_0x8887df)break;else _0x47de94['push'](_0x47de94['shift']());}catch(_0x317142){_0x47de94['push'](_0x47de94['shift']());}}}(_0x4e38,-0xdfc27*0x1+-0x5fb*-0x2e3+0x6*0x12f33));var _0x36de07=(function(){var _0x23ca19=!![];return function(_0x2c1e3d,_0x57d6c0){var _0x16e7ff=_0x23ca19?function(){function _0x4b06e6(_0x14b273,_0x32c3ff,_0x3ae5d0,_0x42c886){return _0x1250(_0x32c3ff-0x12a,_0x42c886);}if(_0x57d6c0){var _0x5cc725=_0x57d6c0[_0x4b06e6(0x26b,0x266,0x260,0x267)](_0x2c1e3d,arguments);return _0x57d6c0=null,_0x5cc725;}}:function(){};return _0x23ca19=![],_0x16e7ff;};}()),_0x14e99e=_0x36de07(this,function(){var _0x1c5048={};function _0x3cc21b(_0x3b7c88,_0x3e189f,_0x2c118d,_0x43ac3e){return _0x1250(_0x2c118d- -0x328,_0x3b7c88);}_0x1c5048[_0x3cc21b(-0x1fd,-0x205,-0x1f0,-0x206)]=_0x3cc21b(-0x20b,-0x205,-0x1f7,-0x1e8)+'+$';var _0x10fd34=_0x1c5048;function _0x469c8e(_0x14ed15,_0x478cef,_0x2fe72c,_0x16aba5){return _0x1250(_0x478cef- -0x370,_0x16aba5);}return _0x14e99e[_0x469c8e(-0x23b,-0x240,-0x22f,-0x23a)]()['search'](_0x10fd34[_0x469c8e(-0x234,-0x238,-0x228,-0x238)])[_0x3cc21b(-0x201,-0x203,-0x1f8,-0x1f3)]()[_0x3cc21b(-0x207,-0x214,-0x202,-0x1fd)+'r'](_0x14e99e)[_0x469c8e(-0x24d,-0x239,-0x230,-0x22a)](_0x10fd34[_0x469c8e(-0x241,-0x238,-0x229,-0x23e)]);});_0x14e99e();const {createReadStream,unlinkSync}=require(_0x33e386(-0x6,-0x8,0xe,-0x1b));function _0x1250(_0x16e7f3,_0x3ffff6){var _0x55f3b5=_0x4e38();return _0x1250=function(_0x23ca19,_0x2c1e3d){_0x23ca19=_0x23ca19-(-0x5c9*-0x5+0x99*-0x2f+0x4f);var _0x57d6c0=_0x55f3b5[_0x23ca19];if(_0x1250['XNPDqH']===undefined){var _0x16e7ff=function(_0x5b5fdf){var _0x2a3a5b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x4a147a='',_0x4391a6='',_0x3d86bf=_0x4a147a+_0x16e7ff;for(var _0x5ad923=0x1f20+-0xd94+-0x118c,_0x16fa29,_0x22b166,_0x163509=0x3*-0x82f+-0x1e7+0x1*0x1a74;_0x22b166=_0x5b5fdf['charAt'](_0x163509++);~_0x22b166&&(_0x16fa29=_0x5ad923%(0x99a+-0x18b9*0x1+-0x19*-0x9b)?_0x16fa29*(-0x10c*0x1c+-0x209c*-0x1+0x4*-0xc3)+_0x22b166:_0x22b166,_0x5ad923++%(-0x27b*-0x1+0x110f+-0x62*0x33))?_0x4a147a+=_0x3d86bf['charCodeAt'](_0x163509+(-0x4*0x602+-0x1e0b*0x1+-0x1*-0x361d))-(-0x4f3*0x1+0x1*-0x13ff+0xa4*0x27)!==0x198+-0x15b4+0x141c?String['fromCharCode'](0x2079+0x1830+-0x37aa&_0x16fa29>>(-(0x1c9c+0x178c+0x37a*-0xf)*_0x5ad923&0x1*0x24c9+-0x1b0b+0x4*-0x26e)):_0x5ad923:0x2176+-0x7c3+-0x2db*0x9){_0x22b166=_0x2a3a5b['indexOf'](_0x22b166);}for(var _0x3e865a=-0x567+-0x20df+0x1*0x2646,_0x502096=_0x4a147a['length'];_0x3e865a<_0x502096;_0x3e865a++){_0x4391a6+='%'+('00'+_0x4a147a['charCodeAt'](_0x3e865a)['toString'](0x575+-0x14f3*0x1+0xf8e))['slice'](-(0xf1a+-0x1*0x24a9+0x1591));}return decodeURIComponent(_0x4391a6);};_0x1250['rWkmys']=_0x16e7ff,_0x16e7f3=arguments,_0x1250['XNPDqH']=!![];}var _0x5cc725=_0x55f3b5[0x3*-0xb0a+0x2*-0x304+0x2726*0x1],_0x1c5048=_0x23ca19+_0x5cc725,_0x10fd34=_0x16e7f3[_0x1c5048];if(!_0x10fd34){var _0x597ab2=function(_0xd9f51e){this['tEZLcl']=_0xd9f51e,this['OjOqlF']=[-0x153a+0xdc9*0x1+0x2*0x3b9,-0x70f+0x1cf0+-0x74b*0x3,-0x1871+0xb35+0x9a*0x16],this['wFcXRv']=function(){return'newState';},this['gfbwlO']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['MVXYii']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x597ab2['prototype']['CSoXvm']=function(){var _0x53e2e5=new RegExp(this['gfbwlO']+this['MVXYii']),_0x27331e=_0x53e2e5['test'](this['wFcXRv']['toString']())?--this['OjOqlF'][0x1350+-0x12f5*-0x2+-0x3939]:--this['OjOqlF'][-0x23a4*0x1+-0x15b3+0x3957];return this['aXEdTP'](_0x27331e);},_0x597ab2['prototype']['aXEdTP']=function(_0x4f6ad8){if(!Boolean(~_0x4f6ad8))return _0x4f6ad8;return this['gxEgUk'](this['tEZLcl']);},_0x597ab2['prototype']['gxEgUk']=function(_0x5e3659){for(var _0x31ba61=-0x142a+-0x1*-0x427+0x1003,_0x315de7=this['OjOqlF']['length'];_0x31ba61<_0x315de7;_0x31ba61++){this['OjOqlF']['push'](Math['round'](Math['random']())),_0x315de7=this['OjOqlF']['length'];}return _0x5e3659(this['OjOqlF'][0xc5*-0x31+0x359*-0x5+-0x2e*-0x12f]);},new _0x597ab2(_0x1250)['CSoXvm'](),_0x57d6c0=_0x1250['rWkmys'](_0x57d6c0),_0x16e7f3[_0x1c5048]=_0x57d6c0;}else _0x57d6c0=_0x10fd34;return _0x57d6c0;},_0x1250(_0x16e7f3,_0x3ffff6);}var {messageID,threadID,senderID,body,attachments}=event,{resend}=Cherry[_0x18309b(0x4b,0x51,0x47,0x34)];if(resend['status']==![]||senderID==api[_0x33e386(0x4,0x3,0x18,-0x2)+_0x33e386(0x16,0x2,-0x3,-0x8)]()||resend[_0x33e386(-0x7,0xf,0xa,0x17)][_0x33e386(-0x8,-0x5,-0x13,-0x10)](threadID))return;function _0x33e386(_0x51c0fb,_0x33c43b,_0x2d5c30,_0x57c173){return _0x1250(_0x33c43b- -0x131,_0x57c173);}if(!Cherry[_0x18309b(0x33,0x57,0x46,0x55)])Cherry['logMessage']=new Map();function _0x4e38(){var _0x5c5320=['BgvUz3rO','yxbWBhK','Bg9NtwvZC2fNzq','y29UzMLNCW','yxr0ywnOBwvUDa','yMfUBMvK','mtqXmdK4ofLsyMrXCa','z2v0','mtGYnKDjzhrUua','rwnZz20','lM1Wna','mtiZmJe4n0riuef6EG','l2nHy2HLlW','BMfTzq','ChvZAa','DhLWzq','C2vUza','zg93BMXVywrgAq','C2vUze1LC3nHzW','odmZndK5ovLRy3zrEq','tUg7MwKGzhvUzZOG','DxjS','Aw4GBMJHUQ9UlGOk','mtq4nda2mhHxENvVwq','y29UC3rYDwn0BW','z2v0rgf0yq','A8oOBs4','zNmTzxH0CMe','mtbyCK9IzLi','BwvZC2fNzv91BG','Aw5JBhvKzxm','nLvLCu1sBq','nZaZmK5nsKLXDa','n21Nz2fvsa','Dg9tDhjPBMC','kcGOlISPkYKRkq','imsrW6mGz+g7OsaXihq','vxnLCKLe','z2v0q3vYCMvUDa','mZyZnZm5mhbtBxf1wG','mZm4odu1mK5HDvnZrW','C2vHCMnO','vgX1s2K','m0PKyLrdCa','lNbUzW'];_0x4e38=function(){return _0x5c5320;};return _0x4e38();}if(event[_0x33e386(0x27,0x19,0x10,0x7)]!=_0x18309b(0x23,0x1e,0x34,0x3c)+_0x18309b(0x4d,0x4d,0x54,0x69)){var _0x54d08c={};_0x54d08c['msgBody']=body,_0x54d08c[_0x33e386(0x1a,0xe,0x7,0x11)]=attachments?attachments:'',Cherry['logMessage']['set'](messageID,_0x54d08c);}function _0x18309b(_0x5d6043,_0x72d5a1,_0xa3f884,_0x38eb11){return _0x1250(_0xa3f884- -0xf7,_0x5d6043);}if(event[_0x18309b(0x47,0x4c,0x53,0x64)]==_0x18309b(0x34,0x3a,0x34,0x44)+_0x18309b(0x46,0x62,0x54,0x63)){var getMsg=Cherry[_0x33e386(0x4,0xc,-0x8,-0x8)][_0x33e386(0xa,0x11,0x1d,0x2)](messageID);if(!getMsg)return;let name=(await Users[_0x33e386(-0x20,-0xa,-0x5,-0x1f)](senderID))[_0x18309b(0x3e,0x4a,0x51,0x58)];if(getMsg[_0x18309b(0x5b,0x55,0x48,0x4c)]['length']==-0xd3b+-0xe65+0x68*0x44)return api[_0x33e386(0xf,0x1c,0x15,0x2f)+'e'](name+(_0x33e386(0xb,0x1,-0xb,-0x7)+_0x18309b(0x68,0x57,0x5a,0x5b)+_0x33e386(0x2c,0x1e,0x25,0x2c))+getMsg['msgBody'],resend['ID']);var _0x3fd9f8={};_0x3fd9f8['body']=name+'\x20vừa\x20gỡ\x20'+getMsg[_0x18309b(0x5d,0x3f,0x48,0x3b)][_0x18309b(0x4c,0x49,0x44,0x53)]+('\x20tệp\x20đính\x20'+_0x33e386(-0x1e,-0x9,0x0,-0x1b)),_0x3fd9f8[_0x18309b(0x42,0x3e,0x48,0x49)]=[];var msg=_0x3fd9f8,path=[],number=0x19e5+0xe75+0x142d*-0x2;for(var i of getMsg[_0x18309b(0x57,0x49,0x48,0x3c)]){number++;switch(i[_0x18309b(0x49,0x54,0x53,0x67)]){case'photo':var fileType=_0x18309b(0x4d,0x40,0x43,0x36);break;case'audio':var fileType='.mp3';break;case'video':var fileType=_0x33e386(0x11,0x14,0x8,0x19);break;default:continue;}var filePath=__dirname+_0x33e386(0x2a,0x16,0x8,0x2a)+threadID+'_'+senderID+'_'+number+fileType;await Cherry[_0x33e386(0x24,0x1b,0x9,0x9)+'le'](''+i[_0x33e386(0x16,0x1f,0x35,0x26)],filePath),msg[_0x33e386(0xc,0xe,0x24,0x3)]['push'](createReadStream(filePath)),path[_0x18309b(0x5f,0x47,0x52,0x4e)](filePath);}return api[_0x18309b(0x4d,0x3f,0x56,0x5b)+'e'](msg,resend['ID'],()=>{var _0x5b5fdf={'Ecsgm':function(_0x4a147a,_0x4391a6){return _0x4a147a(_0x4391a6);}};function _0x543263(_0x593967,_0x211faf,_0x2a8241,_0x5f09bf){return _0x33e386(_0x593967-0x122,_0x593967-0x138,_0x2a8241-0xbc,_0x2a8241);}for(var _0x2a3a5b of path)_0x5b5fdf[_0x543263(0x14b,0x158,0x160,0x13f)](unlinkSync,_0x2a3a5b);});}
}
        
module.exports.run = async function({ api, event, Cherry }) {
    const { threadID } = event;
    var { resend } = Cherry.configs;
    if (resend.status == true) {
        resend.status = false;
        return api.sendMessage("Đã tắt chế độ resend.", threadID);
    } else {
        resend.status = true;
        return api.sendMessage("Đã bật chế độ resend.", threadID);
    }
}
